{"version":3,"sources":["webpack:///./src/store/reducers/sources-reducer.js","webpack:///./src/store/index.js","webpack:///./src/App.js","webpack:///./src/utilities/get-base-name.js","webpack:///./src/entry.js","webpack:///./src/api/api.js","webpack:///./src/constants/api-constants.js","webpack:///./src/store/actions.js","webpack:///./src/api/sources.js","webpack:///./src/components/detail-drawer/drawer-panel-content.js","webpack:///./src/components/detail-drawer/index.js","webpack:///./src/routes.js","webpack:///./src/components/loaders/card-loader.js","webpack:///./src/api/topology-viewer-api.js","webpack:///./src/store/action-types/sources-action-types.js"],"names":["registry","sourcesInitialState","isLoaded","sourceTypes","sources","details","isDetailLoading","detailOpen","selectedNode","undefined","detail","node","name","openedNodes","keepClosed","LOAD_DATA","state","payload","LOAD_SOURCE_TYPES","data","LOAD_DETAIL_FULFILLED","LOAD_DETAIL_FAILED","LOAD_DETAIL_PENDING","openDetail","CLOSE_DETAIL","OPEN_DETAIL","CLICK_ON_NODE","includes","filter","KEEP_CLOSED","OPEN_DETAIL_BUTTON","App","useEffect","insights","chrome","init","getBaseName","pathname","release","pathName","split","shift","ReactDOM","render","store","Error","middleware","ReducerRegistry","thunk","promiseMiddleware","register","sourcesReducer","applyReducerHash","getStore","basename","window","location","document","getElementById","axiosInstance","axios","create","interceptors","response","use","getAxtionsInstace","grapqlInstance","request","config","a","auth","getUser","errors","message","errorType","TOPOLOGICAL_INVETORY_API_BASE","SOURCES_API_BASE","loadSourcesAction","dispatch","loadSources","ids","map","id","post","query","then","additionalData","type","source","find","loadSourceTypes","get","LOAD_SOURCE_TYPES_FAILED","loadItemDetail","nodeName","getState","closeDetailDrawer","clickOnNode","openDetailButton","PanelContent","isLoading","useSelector","useDispatch","DrawerPanelContent","DrawerHead","DrawerActions","DrawerCloseButton","onClick","DrawerPanelBody","Bullseye","className","Spinner","src","DetailDrawer","children","open","Drawer","isExpanded","DrawerContent","panelContent","DrawerContentBody","propTypes","PropTypes","oneOfType","arrayOf","TopologyView","lazy","TreeView","Crossroads","paths","index","treeView","topologyView","StyledGrid","styled","Grid","Routes","hasGutter","GridItem","fallback","exact","path","component","StyledCard","Card","CardLoader","size","API","structureNode","topologyViewNode","nodeShape","nodeType","transformLabel","source_type_id","product_name","label","attributes","loadSourceQuery","createGraphQL","child","prefix"],"mappings":"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","file":"js/lib~App~06837ae4.dfe51df80e8164fba660.js","sourcesContent":["import {\n  LOAD_DATA,\n  LOAD_SOURCE_TYPES,\n  LOAD_DETAIL_FULFILLED,\n  LOAD_DETAIL_FAILED,\n  LOAD_DETAIL_PENDING,\n  CLOSE_DETAIL,\n  OPEN_DETAIL,\n  CLICK_ON_NODE,\n  KEEP_CLOSED,\n  OPEN_DETAIL_BUTTON,\n} from '../action-types/sources-action-types';\n\nexport const sourcesInitialState = {\n  isLoaded: false,\n  sourceTypes: [],\n  sources: [],\n  details: {},\n  isDetailLoading: false,\n  detailOpen: false,\n  selectedNode: undefined,\n  detail: {\n    node: undefined,\n    name: undefined,\n  },\n  openedNodes: [],\n  keepClosed: false,\n};\n\nconst loadData = (state, { payload: { sources } }) => ({\n  ...state,\n  isLoaded: true,\n  sources,\n});\n\nconst loadSourceTypes = (state, { payload: { data } }) => ({\n  ...state,\n  sourceTypes: data,\n});\n\nconst loadDetailPending = (state) => ({\n  ...state,\n  isDetailLoading: true,\n  openDetail: true,\n});\n\nconst loadDetailFailed = (state) => ({\n  ...state,\n  isDetailLoading: false,\n});\n\nconst loadDetailFulfilled = (state, { payload }) => ({\n  ...state,\n  details: {\n    ...state.details,\n    ...payload,\n  },\n  isDetailLoading: false,\n});\n\nconst closeDetail = (state) => ({\n  ...state,\n  detailOpen: false,\n});\n\nconst openDetail = (state, { payload }) => ({\n  ...state,\n  detailOpen: !state.keepClosed,\n  detail: {\n    node: payload.node,\n    name: payload.name,\n  },\n});\n\nconst openDetailButton = (state) => ({\n  ...state,\n  detailOpen: true,\n});\n\nconst keepClosed = (state) => ({\n  ...state,\n  keepClosed: !state.keepClosed,\n});\n\nconst clickOnNode = (state, { payload }) => ({\n  ...state,\n  openedNodes: state.openedNodes.includes(payload.node)\n    ? state.openedNodes.filter((node) => node !== payload.node)\n    : [...state.openedNodes, payload.node],\n  selectedNode: payload.node,\n});\n\nexport default {\n  [LOAD_DATA]: loadData,\n  [LOAD_SOURCE_TYPES]: loadSourceTypes,\n  [LOAD_DETAIL_FULFILLED]: loadDetailFulfilled,\n  [LOAD_DETAIL_FAILED]: loadDetailFailed,\n  [LOAD_DETAIL_PENDING]: loadDetailPending,\n  [CLOSE_DETAIL]: closeDetail,\n  [OPEN_DETAIL]: openDetail,\n  [CLICK_ON_NODE]: clickOnNode,\n  [KEEP_CLOSED]: keepClosed,\n  [OPEN_DETAIL_BUTTON]: openDetailButton,\n};\n","import ReducerRegistry, {\n  applyReducerHash,\n} from '@redhat-cloud-services/frontend-components-utilities/files/ReducerRegistry';\nimport thunk from 'redux-thunk';\nimport promiseMiddleware from 'redux-promise-middleware';\nimport sourcesReducer, { sourcesInitialState } from './reducers/sources-reducer';\n\nlet registry;\n\nexport const init = (...middleware) => {\n  if (registry) {\n    throw new Error('store already initialized');\n  }\n\n  registry = new ReducerRegistry({}, [thunk, promiseMiddleware, ...middleware]);\n\n  registry.register({\n    sourcesReducer: applyReducerHash(sourcesReducer, sourcesInitialState),\n  });\n  return registry;\n};\n\nexport const getStore = () => registry.getStore();\n\nexport const register = (...args) => registry.register(...args);\n","import React, { Fragment, useEffect } from 'react';\n\nimport Routes from './routes';\n\nconst App = () => {\n  useEffect(() => {\n    insights.chrome.init();\n    // insights.chrome.identifyApp('topological-inventory');\n  }, []);\n\n  return (\n    <Fragment>\n      <Routes />\n    </Fragment>\n  );\n};\n\nexport default App;\n","function getBaseName(pathname) {\n  let release = '/';\n  const pathName = pathname.split('/');\n\n  pathName.shift();\n\n  if (pathName[0] === 'beta') {\n    pathName.shift();\n    release = `/beta/`;\n  }\n\n  return `${release}${pathName[0]}/${pathName[1]}`;\n}\n\nexport default getBaseName;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { init } from './store';\nimport App from './App';\nimport getBaseName from './utilities/get-base-name';\n\nReactDOM.render(\n  <Provider store={init().getStore()}>\n    <Router basename={getBaseName(window.location.pathname)}>\n      <App />\n    </Router>\n  </Provider>,\n\n  document.getElementById('root')\n);\n","import axios from 'axios';\n\nconst resolveInterceptor = (response) => response.data || response;\nconst axiosInstance = axios.create();\naxiosInstance.interceptors.response.use(resolveInterceptor);\n\nexport const getAxtionsInstace = () => axiosInstance;\n\n/**\n * graphql API\n */\n\nconst grapqlInstance = axios.create();\ngrapqlInstance.interceptors.request.use(async (config) => {\n  await window.insights.chrome.auth.getUser();\n  return config;\n});\n/**\n * Graphql does not return error response when the qery fails.\n * Instead it returns 200 response with error object.\n * We catch it and throw it to trigger notification middleware\n */\ngrapqlInstance.interceptors.response.use(({ data }) => {\n  if (data.errors) {\n    throw {\n      message: data.errors[0].errorType,\n      data: data.errors[0].message,\n    };\n  }\n\n  return data;\n});\n\nexport const getGraphqlInstance = () => grapqlInstance;\n","export const TOPOLOGICAL_INVETORY_API_BASE = `/api/topological-inventory/v3.0`;\nexport const SOURCES_API_BASE = `/api/sources/v3.0`;\n","import {\n  LOAD_DATA,\n  LOAD_SOURCE_TYPES,\n  LOAD_SOURCE_TYPES_FAILED,\n  LOAD_DETAIL_FULFILLED,\n  LOAD_DETAIL_FAILED,\n  LOAD_DETAIL_PENDING,\n  OPEN_DETAIL,\n  CLOSE_DETAIL,\n  CLICK_ON_NODE,\n  KEEP_CLOSED,\n  OPEN_DETAIL_BUTTON,\n} from './action-types/sources-action-types';\n\nimport { loadSources } from '../api/topology-viewer-api';\nimport { getSourcesTypes, getSourceTypes } from '../api/sources';\nimport { getAxtionsInstace } from '../api/api';\nimport { TOPOLOGICAL_INVETORY_API_BASE } from '../constants/api-constants';\n\nexport const loadSourcesAction = () => async (dispatch) => {\n  const data = await loadSources();\n\n  const additionalData = await getSourcesTypes(data.sources.map(({ id }) => id));\n\n  return dispatch({\n    type: LOAD_DATA,\n    payload: {\n      sources: data.sources.map((source) => {\n        return {\n          ...additionalData.sources.find(({ id }) => id === source.id),\n          ...source,\n        };\n      }),\n    },\n  });\n};\n\nexport const loadSourceTypes = () => async (dispatch) => {\n  try {\n    const sourceTypes = await getSourceTypes();\n    return dispatch({\n      type: LOAD_SOURCE_TYPES,\n      payload: sourceTypes,\n    });\n  } catch {\n    return dispatch({\n      type: LOAD_SOURCE_TYPES_FAILED,\n    });\n  }\n};\n\nexport const loadItemDetail = (node, nodeName, name, id) => async (dispatch, getState) => {\n  dispatch({\n    type: OPEN_DETAIL,\n    payload: { node, name: nodeName },\n  });\n\n  const {\n    sourcesReducer: { details },\n  } = getState();\n\n  if (details[node]) {\n    return dispatch({\n      type: LOAD_DETAIL_FULFILLED,\n    });\n  }\n\n  dispatch({\n    type: LOAD_DETAIL_PENDING,\n  });\n\n  try {\n    const detail = await getAxtionsInstace().get(`${TOPOLOGICAL_INVETORY_API_BASE}/${name}/${id}`);\n    return dispatch({\n      type: LOAD_DETAIL_FULFILLED,\n      payload: {\n        [node]: detail,\n      },\n    });\n  } catch {\n    return dispatch({\n      type: LOAD_DETAIL_FAILED,\n    });\n  }\n};\n\nexport const closeDetailDrawer = () => ({\n  type: CLOSE_DETAIL,\n});\n\nexport const clickOnNode = (node) => ({\n  type: CLICK_ON_NODE,\n  payload: { node },\n});\n\nexport const keepClosed = () => ({\n  type: KEEP_CLOSED,\n});\n\nexport const openDetailButton = () => ({\n  type: OPEN_DETAIL_BUTTON,\n});\n","import { getAxtionsInstace } from './api';\nimport { SOURCES_API_BASE } from '../constants/api-constants';\n\nexport const getSourcesTypes = (ids) =>\n  getAxtionsInstace()\n    .post(`${SOURCES_API_BASE}/graphql`, {\n      query: `{ sources( filter: { id: { eq: [${ids}] } } )\n        { id, source_type_id, name }\n    }`,\n    })\n    .then(({ data }) => data);\n\nexport const getSourceTypes = () => getAxtionsInstace().get(`${SOURCES_API_BASE}/source_types`);\n","import React from 'react';\nimport ReactJsonView from 'react-json-view';\nimport {\n  DrawerPanelContent,\n  DrawerHead,\n  DrawerActions,\n  DrawerCloseButton,\n  Spinner,\n  Bullseye,\n  DrawerPanelBody,\n} from '@patternfly/react-core';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport { closeDetailDrawer } from '../../store/actions';\n\nconst PanelContent = () => {\n  const isLoading = useSelector(({ sourcesReducer }) => sourcesReducer.isDetailLoading);\n  const id = useSelector(({ sourcesReducer }) => sourcesReducer.detail?.node);\n  const name = useSelector(({ sourcesReducer }) => sourcesReducer.detail?.name);\n  const data = useSelector(({ sourcesReducer }) => sourcesReducer.details?.[id]);\n\n  const dispatch = useDispatch();\n\n  return (\n    <DrawerPanelContent>\n      <DrawerHead>\n        {name} -- {id}\n        <DrawerActions>\n          <DrawerCloseButton onClick={() => dispatch(closeDetailDrawer())} />\n        </DrawerActions>\n      </DrawerHead>\n      <DrawerPanelBody>\n        {isLoading ? (\n          <Bullseye className=\"pf-u-p-xl\">\n            <Spinner />\n          </Bullseye>\n        ) : (\n          <ReactJsonView src={data} />\n        )}\n      </DrawerPanelBody>\n    </DrawerPanelContent>\n  );\n};\n\nexport default PanelContent;\n","import React from 'react';\nimport { Drawer, DrawerContent, DrawerContentBody } from '@patternfly/react-core';\nimport PropTypes from 'prop-types';\nimport { useSelector } from 'react-redux';\n\nimport PanelContent from './drawer-panel-content';\n\nconst DetailDrawer = ({ children }) => {\n  const open = useSelector(({ sourcesReducer }) => sourcesReducer.detailOpen);\n\n  return (\n    <Drawer isExpanded={open}>\n      <DrawerContent panelContent={<PanelContent />}>\n        <DrawerContentBody>{children}</DrawerContentBody>\n      </DrawerContent>\n    </Drawer>\n  );\n};\n\nDetailDrawer.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.node, PropTypes.arrayOf(PropTypes.node)]),\n};\n\nexport default DetailDrawer;\n","import React, { Suspense, lazy } from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport { Grid, GridItem } from '@patternfly/react-core';\n\nimport CardLoader from './components/loaders/card-loader';\nimport DetailDrawer from './components/detail-drawer';\n\nconst TopologyView = lazy(() => import('./pages/topology-view'));\nconst TreeView = lazy(() => import('./pages/tree-view'));\nconst Crossroads = lazy(() => import('./pages/crossroads'));\n\nexport const paths = {\n  index: '/',\n  treeView: '/tree-view',\n  topologyView: '/topology-viewer',\n};\n\nconst StyledGrid = styled(Grid)`\n  min-height: 100%;\n`;\n\nconst Routes = () => (\n  <StyledGrid hasGutter>\n    <GridItem>\n      <Suspense fallback={<CardLoader />}>\n        <DetailDrawer>\n          <Switch>\n            <Route exact path={paths.treeView} component={TreeView} />\n            <Route exact path={paths.topologyView} component={TopologyView} />\n            <Route path={Routes.index} component={Crossroads} />\n            <Route path=\"*\" component={Crossroads} />\n          </Switch>\n        </DetailDrawer>\n      </Suspense>\n    </GridItem>\n  </StyledGrid>\n);\n\nexport default Routes;\n","import React from 'react';\nimport { Bullseye, Card, CardBody, Spinner } from '@patternfly/react-core';\nimport styled from 'styled-components';\n\nconst StyledCard = styled(Card)`\n  height: 100%;\n`;\n\nconst CardLoader = () => (\n  <StyledCard>\n    <CardBody>\n      <Bullseye>\n        <Spinner size=\"xl\" />\n      </Bullseye>\n    </CardBody>\n  </StyledCard>\n);\n\nexport default CardLoader;\n","import { getAxtionsInstace } from './api';\nimport { TOPOLOGICAL_INVETORY_API_BASE } from '../constants/api-constants';\n\nconst API = getAxtionsInstace();\n\nexport const structureNode = {\n  name: 'sources',\n  topologyViewNode: {\n    nodeShape: 'hexagon',\n    nodeType: 'source',\n  },\n  transformLabel: (node, sourceTypes) =>\n    `${node.name} (${sourceTypes?.find(({ id }) => id === node.source_type_id)?.product_name || node.source_type_id})`,\n  children: [\n    {\n      name: 'service_offerings',\n      label: 'Service offerings',\n      attributes: ['name'],\n      topologyViewNode: {\n        nodeShape: 'square',\n        nodeType: 'serviceOfferings',\n      },\n    },\n    {\n      name: 'service_plans',\n      label: 'Service plans',\n      attributes: ['name'],\n      topologyViewNode: {\n        nodeShape: 'square',\n        nodeType: 'servicePlans',\n      },\n    },\n    {\n      name: 'service_instances',\n      label: 'Service instances',\n      attributes: ['name'],\n      topologyViewNode: {\n        nodeShape: 'square',\n        nodeType: 'serviceInstances',\n      },\n    },\n    {\n      name: 'service_inventories',\n      label: 'Service inventories',\n      attributes: ['name'],\n      topologyViewNode: {\n        nodeShape: 'square',\n        nodeType: 'serviceInventories',\n      },\n    },\n    {\n      name: 'service_instance_nodes',\n      label: 'Service instance nodes',\n      attributes: ['name'],\n      topologyViewNode: {\n        nodeShape: 'square',\n        nodeType: 'serviceInstanceNodes',\n      },\n    },\n    {\n      name: 'service_offering_nodes',\n      label: 'Service offering nodes',\n      attributes: ['name'],\n      topologyViewNode: {\n        nodeShape: 'square',\n        nodeType: 'serviceOfferingsNode',\n      },\n    },\n    {\n      name: 'source_regions',\n      label: 'Source regions',\n      attributes: ['name'],\n      children: [\n        {\n          name: 'networks',\n          label: 'Networks',\n          attributes: ['name'],\n          children: [\n            {\n              name: 'subnets',\n              label: 'Subnets',\n              attributes: ['name'],\n            },\n          ],\n        },\n        {\n          name: 'vms',\n          label: 'Virtual machines',\n          attributes: ['name'],\n          children: [\n            {\n              name: 'network_adapters',\n              label: 'Network adapters',\n              attributes: ['mac_address'],\n              children: [\n                {\n                  name: 'ipaddresses',\n                  label: 'IP addresses',\n                  attributes: ['ipaddress'],\n                },\n              ],\n            },\n            {\n              name: 'security_groups',\n              label: 'Security groups',\n              attributes: ['name'],\n            },\n            {\n              name: 'volumes',\n              label: 'Volumes',\n              attributes: ['name'],\n            },\n          ],\n        },\n      ],\n    },\n  ],\n};\n\nconst createGraphQL = (node) =>\n  `${node.name} {id,${node.attributes ? node.attributes : ''},${\n    node.children ? node.children.map((child) => createGraphQL(child)) : ''\n  }}`;\n\nconst loadSourceQuery = `{${createGraphQL(structureNode)}}`;\n\nexport const loadSources = () =>\n  API.post(`${TOPOLOGICAL_INVETORY_API_BASE}/graphql`, {\n    query: loadSourceQuery,\n  }).then(({ data }) => data);\n","const prefix = '@@topological_inventory_frontend/';\n\nexport const LOAD_DATA = `${prefix}LOAD_DATA`;\n\nexport const LOAD_SOURCE_TYPES = `${prefix}LOAD_SOURCE_TYPES`;\nexport const LOAD_SOURCE_TYPES_FAILED = `${prefix}LOAD_SOURCE_TYPES_FAILED`;\n\nexport const LOAD_DETAIL_PENDING = `${prefix}LOAD_DETAIL_PENDING`;\nexport const LOAD_DETAIL_FULFILLED = `${prefix}LOAD_DETAIL_FULFILLED`;\nexport const LOAD_DETAIL_FAILED = `${prefix}LOAD_DETAIL_FAILED`;\n\nexport const CLOSE_DETAIL = `${prefix}CLOSE_DETAIL`;\nexport const OPEN_DETAIL = `${prefix}OPEN_DETAIL`;\n\nexport const CLICK_ON_NODE = `${prefix}CLICK_ON_NODE`;\n\nexport const OPEN_DETAIL_BUTTON = `${prefix}OPEN_DETAIL_BUTTON`;\nexport const KEEP_CLOSED = `${prefix}KEEP_CLOSED`;\n"],"sourceRoot":""}