{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack:///./src/components/view-switcher.js","webpack:///./node_modules/@babel/runtime/helpers/extends.js","webpack:///./src/pages/tree-view.js"],"names":["arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","module","exports","arr","i","Array","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","TypeError","StyledLink","styled","Link","ViewSwitcher","props","pathname","useLocation","to","paths","treeView","isSelected","topologyView","_extends","assign","target","arguments","source","key","prototype","hasOwnProperty","call","apply","this","TreeView","useState","treeData","setTreeData","dispatch","useDispatch","isLoaded","useSelector","sourcesReducer","sources","shallowEqual","sourceTypes","openedNodes","openedNode","detail","node","useEffect","loadSourceTypes","loadSourcesAction","createTreeData","item","infoNode","structureNode","expandedNodes","map","children","forEach","child","name","label","id","subItem","defaultExpanded","includes","attributes","transformLabel","isSelectable","className","activeItems","match","data","onSelect","e","parent","category","clickOnNode","loadItemDetail"],"mappings":"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","file":"js/11.8145d0e201d6ac6988c9.js","sourcesContent":["var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;","import React from 'react';\nimport { ToggleGroupItem, ToggleGroup } from '@patternfly/react-core';\nimport { Link, useLocation } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport { paths } from '../routes';\n\nconst StyledLink = styled(Link)`\n  color: inherit;\n  text-decoration: none;\n`;\n\nconst ViewSwitcher = (props) => {\n  const { pathname } = useLocation();\n\n  return (\n    <ToggleGroup {...props}>\n      <StyledLink to={paths.treeView}>\n        <ToggleGroupItem isSelected={pathname === paths.treeView}>Tree view</ToggleGroupItem>\n      </StyledLink>\n      <StyledLink to={paths.topologyView}>\n        <ToggleGroupItem isSelected={pathname === paths.topologyView}>Topology view</ToggleGroupItem>\n      </StyledLink>\n    </ToggleGroup>\n  );\n};\n\nexport default ViewSwitcher;\n","function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector, shallowEqual } from 'react-redux';\n\nimport { Card, CardBody, CardTitle } from '@patternfly/react-core';\n\nimport { structureNode } from '../api/topology-viewer-api';\n\nimport CardLoader from '../components/loaders/card-loader';\nimport { loadSourcesAction, loadSourceTypes, loadItemDetail, clickOnNode } from '../store/actions';\n\nimport { TreeView as PFTreeView } from '@patternfly/react-core';\nimport ViewSwitcher from '../components/view-switcher';\n\nconst createTreeData = (item, infoNode = structureNode, sourceTypes = [], expandedNodes = []) => {\n  if (Array.isArray(item)) {\n    return item.map((source) => createTreeData(source, infoNode, sourceTypes, expandedNodes));\n  }\n\n  const children = [];\n\n  infoNode.children?.forEach((child) => {\n    if (item[child.name]?.length > 0) {\n      children.push({\n        name: child.label,\n        id: child.name,\n        children: item[child.name]?.map((subItem) => createTreeData(subItem, child, sourceTypes, expandedNodes)),\n        defaultExpanded: expandedNodes.includes(`${item.id}-${child.name}`),\n      });\n    }\n  });\n\n  let name = (infoNode.attributes && item[infoNode.attributes[0]]) || item.name || item.id;\n\n  if (infoNode.transformLabel) {\n    name = infoNode.transformLabel(item, sourceTypes);\n  }\n\n  return {\n    id: item.id,\n    key: item.id,\n    name,\n    ...(children.length > 0 ? { children } : {}),\n    isSelectable: true,\n    defaultExpanded: expandedNodes.includes(`${infoNode.name}-${item.id}`),\n    className: 'pf-m-current',\n  };\n};\n\nconst TreeView = () => {\n  const [treeData, setTreeData] = useState();\n\n  const dispatch = useDispatch();\n\n  const isLoaded = useSelector(({ sourcesReducer: { isLoaded } }) => isLoaded);\n  const sources = useSelector(({ sourcesReducer }) => sourcesReducer.sources, shallowEqual);\n  const sourceTypes = useSelector(({ sourcesReducer }) => sourcesReducer.sourceTypes, shallowEqual);\n  const openedNodes = useSelector(\n    ({ sourcesReducer }) => sourcesReducer.openedNodes,\n    () => false\n  );\n  const openedNode = useSelector(({ sourcesReducer }) => sourcesReducer.detail.node);\n\n  useEffect(() => {\n    if (!isLoaded) {\n      dispatch(loadSourceTypes());\n      dispatch(loadSourcesAction());\n    }\n  }, []);\n\n  useEffect(() => {\n    if (isLoaded) {\n      setTreeData(createTreeData(sources, structureNode, sourceTypes, openedNodes));\n    }\n  }, [isLoaded]);\n\n  if (!isLoaded || !treeData) {\n    return <CardLoader />;\n  }\n\n  return (\n    <Card>\n      <CardTitle>\n        <ViewSwitcher />\n      </CardTitle>\n      <CardBody>\n        Sources\n        <PFTreeView\n          {...(openedNode && { activeItems: [{ id: openedNode.match(/\\d+/)[0] }] })}\n          data={treeData}\n          onSelect={(e, item, parent) => {\n            const category = parent?.id || 'sources';\n            dispatch(clickOnNode(category, item.id));\n\n            if (item.isSelectable) {\n              dispatch(loadItemDetail(category, item.id, item.name));\n            }\n          }}\n        />\n      </CardBody>\n    </Card>\n  );\n};\n\nexport default TreeView;\n"],"sourceRoot":""}