{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/extends.js","webpack:///./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack:///./src/components/view-switcher.js","webpack:///./src/pages/tree-view.js"],"names":["_extends","module","exports","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","arr","Array","isArray","Symbol","iterator","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","err","TypeError","StyledLink","styled","Link","ViewSwitcher","props","pathname","useLocation","dispatch","useDispatch","shouldClose","useSelector","sourcesReducer","keepClosed","justifyContent","default","to","paths","treeView","isSelected","topologyView","variant","isInline","onClick","openDetailButton","checked","isChecked","label","id","name","TreeView","useState","treeData","setTreeData","isLoaded","sources","shallowEqual","sourceTypes","openedNodes","openedNode","selectedNode","useEffect","loadSourceTypes","loadSourcesAction","createTreeData","item","infoNode","structureNode","expandedNodes","map","children","forEach","child","nodeName","subItem","defaultExpanded","includes","attributes","transformLabel","originalId","isSelectable","category","activeItems","data","onSelect","e","clickOnNode","loadItemDetail"],"mappings":"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","file":"js/13.dca1f54268eed456ce23.js","sourcesContent":["function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;","import React from 'react';\nimport { ToggleGroupItem, ToggleGroup, Flex, FlexItem, Button, Checkbox } from '@patternfly/react-core';\nimport { Link, useLocation } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { paths } from '../routes';\nimport { openDetailButton, keepClosed } from '../store/actions';\n\nconst StyledLink = styled(Link)`\n  color: inherit;\n  text-decoration: none;\n`;\n\nconst ViewSwitcher = (props) => {\n  const { pathname } = useLocation();\n  const dispatch = useDispatch();\n\n  const shouldClose = useSelector(({ sourcesReducer: { keepClosed } }) => keepClosed);\n\n  return (\n    <Flex {...props} justifyContent={{ default: 'justifyContentSpaceBetween' }}>\n      <FlexItem>\n        <ToggleGroup>\n          <StyledLink to={paths.treeView}>\n            <ToggleGroupItem isSelected={pathname === paths.treeView}>Tree view</ToggleGroupItem>\n          </StyledLink>\n          <StyledLink to={paths.topologyView}>\n            <ToggleGroupItem isSelected={pathname === paths.topologyView}>Topology view</ToggleGroupItem>\n          </StyledLink>\n        </ToggleGroup>\n      </FlexItem>\n      <FlexItem>\n        <Flex>\n          <FlexItem>\n            <Button variant=\"link\" isInline onClick={() => dispatch(openDetailButton())}>\n              Open detail\n            </Button>\n          </FlexItem>\n          <FlexItem>\n            <Checkbox\n              checked={shouldClose}\n              isChecked={shouldClose}\n              label=\"Keep closed\"\n              id=\"keep-closed\"\n              name=\"keep-closed\"\n              onClick={() => dispatch(keepClosed())}\n            />\n          </FlexItem>\n        </Flex>\n      </FlexItem>\n    </Flex>\n  );\n};\n\nexport default ViewSwitcher;\n","import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector, shallowEqual } from 'react-redux';\n\nimport { Card, CardBody, CardTitle } from '@patternfly/react-core';\n\nimport { structureNode } from '../api/topology-viewer-api';\n\nimport CardLoader from '../components/loaders/card-loader';\nimport { loadSourcesAction, loadSourceTypes, loadItemDetail, clickOnNode } from '../store/actions';\n\nimport { TreeView as PFTreeView } from '@patternfly/react-core';\nimport ViewSwitcher from '../components/view-switcher';\n\nconst createTreeData = (item, infoNode = structureNode, sourceTypes = [], expandedNodes = []) => {\n  if (Array.isArray(item)) {\n    return item.map((source) => createTreeData(source, infoNode, sourceTypes, expandedNodes));\n  }\n\n  const children = [];\n\n  infoNode.children?.forEach((child) => {\n    if (item[child.name]?.length > 0) {\n      const nodeName = `${item.id}-${child.name}`;\n\n      children.push({\n        name: child.label,\n        id: nodeName,\n        children: item[child.name]?.map((subItem) => createTreeData(subItem, child, sourceTypes, expandedNodes)),\n        defaultExpanded: expandedNodes.includes(nodeName),\n      });\n    }\n  });\n\n  let name = (infoNode.attributes && item[infoNode.attributes[0]]) || item.name || item.id;\n\n  if (infoNode.transformLabel) {\n    name = infoNode.transformLabel(item, sourceTypes);\n  }\n\n  const nodeName = `${infoNode.name}-${item.id}`;\n\n  return {\n    originalId: item.id,\n    id: nodeName,\n    key: item.id,\n    name,\n    ...(children.length > 0 ? { children } : {}),\n    isSelectable: true,\n    defaultExpanded: expandedNodes.includes(nodeName),\n    category: infoNode.name,\n  };\n};\n\nconst TreeView = () => {\n  const [treeData, setTreeData] = useState();\n\n  const dispatch = useDispatch();\n\n  const isLoaded = useSelector(({ sourcesReducer: { isLoaded } }) => isLoaded);\n  const sources = useSelector(({ sourcesReducer }) => sourcesReducer.sources, shallowEqual);\n  const sourceTypes = useSelector(({ sourcesReducer }) => sourcesReducer.sourceTypes, shallowEqual);\n  const openedNodes = useSelector(\n    ({ sourcesReducer }) => sourcesReducer.openedNodes,\n    () => true\n  );\n  const openedNode = useSelector(({ sourcesReducer }) => sourcesReducer.selectedNode);\n\n  useEffect(() => {\n    if (!isLoaded) {\n      dispatch(loadSourceTypes());\n      dispatch(loadSourcesAction());\n    }\n  }, []);\n\n  useEffect(() => {\n    if (isLoaded) {\n      setTreeData(createTreeData(sources, structureNode, sourceTypes, openedNodes));\n    }\n  }, [isLoaded]);\n\n  if (!isLoaded || !treeData) {\n    return <CardLoader />;\n  }\n\n  return (\n    <Card>\n      <CardTitle>\n        <ViewSwitcher />\n      </CardTitle>\n      <CardBody>\n        Sources\n        <PFTreeView\n          {...(openedNode && { activeItems: [{ id: openedNode }] })}\n          data={treeData}\n          onSelect={(e, item) => {\n            dispatch(clickOnNode(item.id));\n\n            if (item.isSelectable) {\n              dispatch(loadItemDetail(item.id, item.name, item.category, item.originalId));\n            }\n          }}\n        />\n      </CardBody>\n    </Card>\n  );\n};\n\nexport default TreeView;\n"],"sourceRoot":""}